CMAKE_MINIMUM_REQUIRED(VERSION 2.6)
PROJECT (sqlite)

SET (SQLITE_NAME sqlite3)
SET (SQLITE_SOVERSION 3)
SET (SQLITE_VERSION 3.7.4)

ADD_LIBRARY (${SQLITE_NAME} STATIC sqlite3.c)
SET_TARGET_PROPERTIES (${SQLITE_NAME} PROPERTIES CLEAN_DIRECT_OUTPUT 1)
SET_TARGET_PROPERTIES (${SQLITE_NAME} PROPERTIES VERSION ${SQLITE_VERSION} SOVERSION ${SQLITE_SOVERSION})
INSTALL (TARGETS ${SQLITE_NAME} DESTINATION lib)

INSTALL (FILES sqlite3ext.h sqlite3.h DESTINATION include/${SQLITE_NAME})

LIST (APPEND PC_LIBS_LIST ${SQLITE_NAME})
IF (NOT WIN32)
    LIST (APPEND PC_LIBS_LIST pthread dl)
ENDIF (NOT WIN32)
    
SET (prefix ${CMAKE_INSTALL_PREFIX})
SET (exec_prefix "\${prefix}")
SET (libdir "\${exec_prefix}/lib")
SET (includedir "\${prefix}/include/${SQLITE_NAME}")
FOREACH (l ${PC_LIBS_LIST})
    SET (PC_LIBS "${PC_LIBS} -l${l}")
ENDFOREACH (l ${PC_LIBS_LIST})
SET (PC_FILE "${PROJECT_BINARY_DIR}/${SQLITE_NAME}.pc")
CONFIGURE_FILE( "${PROJECT_SOURCE_DIR}/sqlite3.pc.in" ${PC_FILE})
INSTALL (FILES ${PC_FILE} DESTINATION lib/pkgconfig)
